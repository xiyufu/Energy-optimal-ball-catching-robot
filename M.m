function [M_out] = M(parms, q)

M_out = zeros(36, 1);

x0 = sin(q(2));
x1 = cos(q(2));
x2 = -x0;
x3 = sin(q(3));
x4 = cos(q(3));
x5 = x1*x4 + x2*x3;
x6 = x2*x4;
x7 = -x3;
x8 = x1*x7;
x9 = x6 + x8;
x10 = cos(q(4));
x11 = x10*x5;
x12 = sin(q(4));
x13 = x12*x5;
x14 = -0.27*x0^2 - 0.27*x1^2;
x15 = x14*x2;
x16 = -x15;
x17 = 0.07*x3^2 + 0.07*x4^2;
x18 = x16 + x17*x6 + x17*x8;
x19 = -x18;
x20 = x10*x19 + 0.302*x11;
x21 = sin(q(5));
x22 = cos(q(5));
x23 = x11*x22 + x21*x9;
x24 = -x13;
x25 = -x21;
x26 = x11*x25 + x22*x9;
x27 = x12*x18 - 0.302*x13;
x28 = x25*x27;
x29 = sin(q(6));
x30 = cos(q(6));
x31 = -x30;
x32 = -x29;
x33 = x23*x31 + x24*x32;
x34 = x23*x29;
x35 = x24*x31 + x34;
x36 = x22*x27;
x37 = -x20;
x38 = -0.21*x30;
x39 = x24*x38 + x31*x36 + x32*x37 + 0.21*x34;
x40 = -parms(72);
x41 = parms(67)*x33 + parms(69)*x35 + parms(70)*x26 + parms(74)*x39 + x28*x40;
x42 = -parms(61);
x43 = 0.21*x30;
x44 = 0.21*x29;
x45 = x23*x43 + x24*x44 + x29*x36 + x31*x37;
x46 = -parms(74);
x47 = parms(66)*x33 + parms(67)*x35 + parms(68)*x26 + parms(73)*x28 + x45*x46;
x48 = -parms(73);
x49 = parms(74)*x35 + parms(75)*x39 + x26*x48;
x50 = parms(72)*x26 + parms(75)*x45 + x33*x46;
x51 = parms(53)*x23 + parms(54)*x24 + parms(55)*x26 + parms(60)*x28 + x29*x41 + x31*x47 + x37*x42 + x43*x50 + x44*x49;
x52 = -parms(60);
x53 = parms(68)*x33 + parms(70)*x35 + parms(71)*x26 + parms(72)*x45 + x39*x48;
x54 = parms(55)*x23 + parms(57)*x24 + parms(58)*x26 + parms(59)*x37 + x36*x52 + x53;
x55 = parms(40)*x11 + parms(41)*x9 + parms(42)*x13 + parms(47)*x20 + x22*x51 + x25*x54;
x56 = -parms(59);
x57 = -parms(54)*x23 - parms(56)*x24 - parms(57)*x26 - parms(61)*x36 - x28*x56 - x31*x41 - x32*x47 - x38*x49 - x44*x50;
x58 = -parms(47);
x59 = parms(42)*x11 + parms(44)*x9 + parms(45)*x13 + x27*x58 + x57;
x60 = -x9;
x61 = parms(46)*x60 + parms(47)*x11 + parms(49)*x20 - parms(59)*x26 - parms(62)*x37 - x23*x42 - x31*x50 - x32*x49;
x62 = 0.302*x10;
x63 = parms(61)*x24 + parms(62)*x36 + x26*x52 + x29*x50 + x31*x49;
x64 = parms(60)*x23 + parms(62)*x28 + parms(73)*x33 + parms(75)*x28 + x24*x56 + x35*x40;
x65 = parms(47)*x24 + parms(48)*x9 + parms(49)*x27 + x22*x63 + x25*x64;
x66 = x12*x65;
x67 = parms(27)*x5 + parms(29)*x9 + parms(35)*x19 + x10*x55 + x12*x59 + x61*x62 - 0.302*x66;
x68 = parms(41)*x11 + parms(43)*x9 + parms(44)*x13 + parms(46)*x37 + parms(48)*x27 + x21*x51 + x22*x54;
x69 = parms(29)*x5 + parms(32)*x9 + parms(33)*x18 + x68;
x70 = -parms(35);
x71 = -x10;
x72 = parms(33)*x9 + parms(36)*x18 + x5*x70 + x61*x71 + x66;
x73 = x17*x72;
x74 = -x1;
x75 = x12*x61;
x76 = -parms(28)*x5 - parms(31)*x9 - x12*x55 - x59*x71 - x62*x65 - 0.302*x75;
x77 = -parms(48);
x78 = parms(34)*x5 + parms(46)*x13 + x11*x77 + x21*x63 + x22*x64;
x79 = parms(16)*x1 + parms(18)*x2 + 0.27*parms(22)*x74 + x17*x78 + 0.27*x3*(parms(34)*x60 + x10*x65 + x75) + 0.27*x4*x78 + x76;
x80 = x76 + 0.07*x78;
x81 = -parms(30);
x82 = 0.27*x3;
x83 = -0.302*x12;
x84 = x12*x82 + x83;
x85 = x17 + 0.27*x4;
x86 = -0.302*x10;
x87 = x10*x82 + x86;
x88 = x22*x85 + x25*x87;
x89 = x21*x85 + x22*x87;
x90 = -x84;
x91 = -x12;
x92 = x22*x91;
x93 = x38*x71 + x44*x92;
x94 = x31*x89 + x32*x90 + x93;
x95 = x31*x92 + x32*x71;
x96 = x29*x92 + x31*x71;
x97 = x25*x91;
x98 = parms(67)*x95 + parms(69)*x96 + parms(70)*x97;
x99 = parms(74)*x94 + x40*x88 + x98;
x100 = x43*x92 + x44*x71;
x101 = x100 + x29*x89 + x31*x90;
x102 = parms(66)*x95 + parms(67)*x96 + parms(68)*x97;
x103 = parms(73)*x88 + x101*x46 + x102;
x104 = parms(74)*x96 + x48*x97;
x105 = parms(75)*x94 + x104;
x106 = parms(72)*x97 + x46*x95;
x107 = parms(75)*x101 + x106;
x108 = parms(53)*x92 + parms(54)*x71 + parms(55)*x97;
x109 = parms(60)*x88 + x103*x31 + x105*x44 + x107*x43 + x108 + x29*x99 + x42*x90;
x110 = parms(68)*x95 + parms(70)*x96 + parms(71)*x97;
x111 = parms(72)*x101 + x110 + x48*x94;
x112 = parms(55)*x92 + parms(57)*x71 + parms(58)*x97;
x113 = parms(59)*x90 + x111 + x112 + x52*x89;
x114 = parms(40)*x91 + parms(42)*x10;
x115 = parms(54)*x92 + parms(56)*x71 + parms(57)*x97;
x116 = -parms(61)*x89 - x103*x32 - x105*x38 - x107*x44 - x115 - x31*x99 - x56*x88;
x117 = parms(42)*x91 + parms(45)*x10;
x118 = parms(61)*x71 + x52*x97;
x119 = parms(62)*x89 + x105*x31 + x107*x29 + x118;
x120 = parms(47)*x71;
x121 = parms(73)*x95 + x40*x96;
x122 = parms(60)*x92 + x56*x71;
x123 = parms(62)*x88 + parms(75)*x88 + x121 + x122;
x124 = parms(49)*x87 + x119*x22 + x120 + x123*x25;
x125 = parms(59)*x97 + x42*x92;
x126 = parms(47)*x91;
x127 = x12*(parms(49)*x84 - parms(62)*x90 - x105*x32 - x107*x31 - x125 + x126);
x128 = parms(33)*x85 - parms(35)*x82 - x12*(parms(47)*x84 + x109*x22 + x113*x25 + x114 + x77*x85) - x124*x62 - 0.302*x127 - x71*(parms(46)*x85 + x116 + x117 + x58*x87) - x81;
x129 = parms(46)*x10 + x77*x91;
x130 = parms(33) + parms(36)*x85 + parms(49)*x85 + x119*x21 + x123*x22 + x129;
x131 = x128 + 0.07*x130;
x132 = parms(41)*x91 + parms(44)*x10;
x133 = parms(46)*x90 + parms(48)*x87 + x109*x21 + x113*x22 + x132;
x134 = 0.07*x22 + x25*x86;
x135 = 0.07*x21 + x22*x86;
x136 = -x83;
x137 = x135*x31 + x136*x32 + x93;
x138 = parms(74)*x137 + x134*x40 + x98;
x139 = x100 + x135*x29 + x136*x31;
x140 = parms(73)*x134 + x102 + x139*x46;
x141 = parms(75)*x137 + x104;
x142 = parms(75)*x139 + x106;
x143 = parms(60)*x134 + x108 + x136*x42 + x138*x29 + x140*x31 + x141*x44 + x142*x43;
x144 = parms(72)*x139 + x110 + x137*x48;
x145 = parms(59)*x136 + x112 + x135*x52 + x144;
x146 = -parms(61)*x135 - x115 - x134*x56 - x138*x31 - x140*x32 - x141*x38 - x142*x44;
x147 = parms(62)*x135 + x118 + x141*x31 + x142*x29;
x148 = parms(62)*x134 + parms(75)*x134 + x121 + x122;
x149 = parms(46)*x136 + parms(48)*x86 + x132 + x143*x21 + x145*x22;
x150 = x25*x30;
x151 = x21*x29;
x152 = x21*x44;
x153 = parms(67)*x150 + parms(69)*x151 + parms(70)*x22 + parms(74)*x152;
x154 = x21*x43;
x155 = parms(66)*x150 + parms(67)*x151 + parms(68)*x22 + x154*x46;
x156 = parms(74)*x151 + parms(75)*x152 + x22*x48;
x157 = parms(72)*x22 + parms(75)*x154 + x150*x46;
x158 = parms(68)*x150 + parms(70)*x151 + parms(71)*x22 + parms(72)*x154 + x152*x48;
x159 = -parms(54)*x21 - parms(57)*x22 - x153*x31 - x155*x32 - x156*x38 - x157*x44;
x160 = -0.21*x29;
x161 = parms(68)*x29 + parms(70)*x30 + parms(72)*x160 + x43*x48;

M_out(1) = parms(11) + parms(4) - x0*x14*(-parms(20)*x2 + parms(21)*x1 + parms(23)*x15 - x72) - x0*(parms(15)*x1 + parms(17)*x2 + parms(20)*x16 + x3*x67 + x4*x69 + x4*x73) - x74*(parms(14)*x1 + parms(15)*x2 + parms(21)*x15 + x4*x67 + x69*x7 + x7*x73);
M_out(2) = x79;
M_out(3) = x80;
M_out(4) = x68;
M_out(5) = x57;
M_out(6) = x53;
M_out(7) = x79;
M_out(8) = parms(19) + 0.54*parms(20) + 0.0729*parms(23) + parms(24) + x128 + x130*x17 + 0.27*x130*x4 + 0.27*x3*(parms(36)*x82 + x10*x124 + x127 + x70);
M_out(9) = x131;
M_out(10) = x133;
M_out(11) = x116;
M_out(12) = x111;
M_out(13) = x80;
M_out(14) = x131;
M_out(15) = 0.14*parms(33) + 0.0049*parms(36) + parms(37) + 0.0049*parms(49) - x12*(parms(47)*x83 - 0.07*parms(48) + x114 + x143*x22 + x145*x25) - 0.302*x12*(parms(49)*x83 - parms(62)*x136 - x125 + x126 - x141*x32 - x142*x31) + 0.07*x129 + 0.07*x147*x21 + 0.07*x148*x22 - x62*(parms(49)*x86 + x120 + x147*x22 + x148*x25) - x71*(0.07*parms(46) + x117 + x146 + x58*x86) - x81;
M_out(16) = x149;
M_out(17) = x146;
M_out(18) = x144;
M_out(19) = x68;
M_out(20) = x133;
M_out(21) = x149;
M_out(22) = parms(43) + parms(50) + x21*(parms(53)*x21 + parms(55)*x22 + x153*x29 + x155*x31 + x156*x44 + x157*x43) + x22*(parms(55)*x21 + parms(58)*x22 + x158);
M_out(23) = x159;
M_out(24) = x158;
M_out(25) = x57;
M_out(26) = x116;
M_out(27) = x146;
M_out(28) = x159;
M_out(29) = parms(56) + parms(63) - x31*(parms(67)*x29 + parms(69)*x30 + parms(74)*x43) - x32*(parms(66)*x29 + parms(67)*x30 + x160*x46) - x38*(parms(74)*x30 + parms(75)*x43) - x44*(parms(74)*x32 + parms(75)*x160);
M_out(30) = x161;
M_out(31) = x53;
M_out(32) = x111;
M_out(33) = x144;
M_out(34) = x158;
M_out(35) = x161;
M_out(36) = parms(71) + parms(76);
